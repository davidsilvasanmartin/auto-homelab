{
  "$schema": "env.config.schema.json",
  "prefix": "HOMELAB",
  "sections": [
    {
      "name": "GENERAL",
      "description": "Generic configuration for all services",
      "variables": [
        {
          "name": "SERVER_IP",
          "type": "IP",
          "description": "The IP address of the server where all services will be running. It wil typically be the IP address of your server in your local network/home network"
        },
        {
          "name": "DOMAIN",
          "type": "STRING",
          "description": "The following is the \"rightmost\" part of the URL to access the services. This must be a subdomain of a public domain you own. For example, if you own the domain \"example.com\", then you can use \"home.example.com\" as this domain."
        },
        {
          "name": "DOCKER_NETWORK",
          "type": "CONSTANT",
          "description": "Internal network for Docker containers",
          "value": "10.42.42.0/24"
        },
        {
          "name": "TIMEZONE",
          "type": "STRING",
          "description": "Timezone for the server. See https://en.wikipedia.org/wiki/List_of_tz_database_time_zones"
        }
      ]
    },
    {
      "name": "IMMICH_WEB",
      "description": "Photo and video management service. See https://github.com/immich-app/immich",
      "variables": [
        {
          "name": "CONTAINER_NAME",
          "type": "CONSTANT",
          "description": "The container's name",
          "value": "homelab-immich"
        },
        {
          "name": "IP",
          "type": "CONSTANT",
          "description": "The container's IP address",
          "value": "10.42.42.9"
        },
        {
          "name": "UPLOAD_PATH",
          "type": "PATH",
          "description": "Path for Immich data. This is where original photos and videos are stored"
        }
      ]
    },
    {
      "name": "IMMICH_DB",
      "description": "SQL database for the Immich service",
      "variables": [
        {
          "name": "CONTAINER_NAME",
          "type": "CONSTANT",
          "description": "The container's name",
          "value": "homelab-immich-db"
        },
        {
          "name": "IP",
          "type": "CONSTANT",
          "description": "The container's IP address",
          "value": "10.42.42.12"
        },
        {
          "name": "DATABASE",
          "type": "CONSTANT",
          "description": "SQL database name",
          "value": "immich"
        },
        {
          "name": "USER",
          "type": "CONSTANT",
          "description": "SQL database user. Warning: DO NOT CHANGE, or there will be problems when restoring data",
          "value": "postgres"
        },
        {
          "name": "PASSWORD",
          "type": "GENERATED",
          "description": "SQL database password",
          "value": "ALL:24"
        },
        {
          "name": "DATA_PATH",
          "type": "PATH",
          "description": "Path for SQL data files"
        }
      ]
    },
    {
      "name": "IMMICH_ML",
      "description": "Container that adds machine learning capabilities to the Immich service",
      "variables": [
        {
          "name": "CONTAINER_NAME",
          "description": "The container's name. IMPORTANT: if this is NOT the default \"immich-machine-learning\", then this hostname has to be set in Immich's server settings via the web interface",
          "type": "CONSTANT",
          "value": "homelab-immich-machine-learning"
        },
        {
          "name": "IP",
          "type": "CONSTANT",
          "description": "The container's IP address",
          "value": "10.42.42.10"
        },
        {
          "name": "CACHE_DATA_PATH",
          "type": "PATH",
          "description": "Path for cache data"
        }
      ]
    },
    {
      "name": "IMMICH_REDIS",
      "description": "Redis database for the Immich service",
      "variables": [
        {
          "name": "CONTAINER_NAME",
          "type": "CONSTANT",
          "description": "The container's name",
          "value": "homelab-immich-redis"
        },
        {
          "name": "IP",
          "type": "CONSTANT",
          "description": "The container's IP address",
          "value": "10.42.42.11"
        },
        {
          "name": "DATA_PATH",
          "type": "PATH",
          "description": "Path for Redis data files"
        }
      ]
    },
    {
      "name": "PORTAINER",
      "description": "Service for managing Docker infrastructure. See https://github.com/portainer/portainer",
      "variables": [
        {
          "name": "CONTAINER_NAME",
          "type": "CONSTANT",
          "description": "The container's name",
          "value": "homelab-portainer"
        },
        {
          "name": "IP",
          "type": "CONSTANT",
          "description": "The container's IP address",
          "value": "10.42.42.18"
        },
        {
          "name": "DATA_PATH",
          "type": "PATH",
          "description": "Path for Portainer data"
        }
      ]
    },
    {
      "name": "BACKUP",
      "description": "Variables for the backup scripts that use Restic with Backblaze B2. These variables do not correspond to any container",
      "variables": [
        {
          "name": "RESTIC_REPOSITORY",
          "type": "STRING",
          "description": "The repository to use for backups. Should be \"b2:<bucket_id>:<directory_inside_bucket>/\""
        },
        {
          "name": "B2_KEY_ID",
          "type": "STRING",
          "description": "They keyID of the application key you should have created for the bucket"
        },
        {
          "name": "B2_APPLICATION_KEY",
          "type": "STRING",
          "description": "The applicationKey of the application key you should have created for the bucket"
        },
        {
          "name": "RESTIC_PASSWORD",
          "type": "GENERATED",
          "description": "The password to use for Restic. It is used to encrypt the backup files. DO KEEP A COPY OF THIS VARIABLE SOMEWHERE SAFE!",
          "value": "ALL:32"
        },
        {
          "name": "PATH",
          "type": "PATH",
          "description": "Path to save the backup files into. Please note, all data you want to backup will be copy-pasted into this folder. Make sure you have enough disk space"
        },
        {
          "name": "RETENTION_DAYS",
          "type": "CONSTANT",
          "description": "How many days to keep the backup files. Backups older than this number of days will be purged",
          "value": "365"
        }
      ]
    }
  ]
}